/**
 * Visitor.js 0.1
 * (c) 2012 Jonas Hermsmeier
 * For details, see: https://github.com/jhermsmeier/visitor.js
 * Licensed under the MIT license.
 */
(function(e){var i=e.document,h=e.navigator,j=e.screen,m=e.localStorage,p=function(){var k=(new Date).getTime(),g={trackLocation:!0,locationData:"location",locationTimeout:6,useGoogleLocation:!0,useHTML5Location:!1,sessionData:"session",sessionTimeout:32,arrived:null},n={locale:function(){var a=(h.language||h.browserLanguage||h.systemLanguage||h.userLanguage).toLowerCase().split("-");return{country:a[1]||a[0],language:a[0]}},location:function(){if(g.trackLocation){var a,b=function(a,b){var f=l.retrieveData(g.locationData);
!f||"Google"!==f.source?(e.googleLocationReady=function(){if(e.google&&e.google.loader&&e.google.loader.ClientLocation){var f=e.google.loader.ClientLocation,f={latitude:f.latitude,longitude:f.longitude,accuracy:null,address:{city:f.address.city,region:f.address.region,country:f.address.country,countryCode:f.address.country_code},source:"Google"};a(f,b);l.storeData(g.locationData,f,36E5*g.locationTimeout)}else a(null,b)},l.loadScript("https://www.google.com/jsapi?callback=googleLocationReady")):a(f,
b)};if(g.useHTML5Location)return function(a,c){h.geolocation?h.geolocation.getCurrentPosition(function(b){a({latitude:b.coords.latitude,longitude:b.coords.longitude,accuracy:b.coords.accuracy,address:null,source:"Client"},c)},function(){b(a,c)}):b(a,c)};if(g.useGoogleLocation)return b}return null},timezone:function(){var a=new Date;a.setMonth(0);a.setDate(1);var b=new Date;b.setMonth(6);b.setDate(1);return{offset:(new Date).getTimezoneOffset()/-60,dst:a.getTimezoneOffset()!==b.getTimezoneOffset()}},
session:function(){var a=l.retrieveData(g.sessionData),b={url:l.parseUrl(i.referrer||i.URL),search:null},d=b.url.query||{},d=d.q||d.p||d.wd||null,c=b.url.host.split("."),c=c[c.length-2];if(d)b.search={engine:c?c[0].toUpperCase()+c.substr(1):null,terms:d.split(" ")};null===a?a={start:k,visits:1,lastVisit:k,referrer:b}:(a.lastVisit=k,a.referrer=b,a.visits++);l.storeData(g.sessionData,a,864E5*g.sessionTimeout);return a},browser:function(){var a=null,b,d,c={Chrome:"Chrome",OmniWeb:"OmniWeb",Safari:"Apple",
iCab:"iCab",Konqueror:"KDE",Firefox:"Firefox",Camino:"Camino","Internet Explorer":"MSIE",Mozilla:"Gecko",Opera:"Opera"};for(a in c)if(b=h.userAgent.match(RegExp("("+c[a]+")(?:(?:/| )([0-9._]*))?")),d=h.userAgent.match(/Version(?:\/| )([0-9._]*)/),b)break;b=d&&d[1]||b&&b[2]||null;var f;if(h.plugins){d=["flash","silverlight","java","quicktime"];var c={},e,g;for(f in d){g=d[f];c[g]=!1;for(var i in h.plugins)if(e=h.plugins[i],e.name&&-1!==e.name.toLowerCase().indexOf(g)){c[g]=!0;break}}f=c}else f=null;
return{name:a,version:b,plugins:f}},os:function(){var a,b,d,c;a={Microsoft:{"Windows 8":"Windows NT (6[.]2)","Windows 7":"Windows NT (6[.]1)","Windows Vista":"Windows NT (6[.]0)","Windows XP":"Windows NT (5[.](?:1|2))","Windows Phone":"Windows Phone OS","Windows Mobile":"Windows Mobile","Windows CE":"Windows CE"},Apple:{"Mac Power PC":"Mac PPC|PPC|Mac PowerPC|Mac_PowerPC","Mac OS X":"Mac OS X","Mac iOS":"iPod|iPad|iPhone",Mac:"Darwin|Macintosh|Power Macintosh|Mac OS"},Google:{Android:"Android"},Canonical:{Kubuntu:"Kubuntu",
Xubuntu:"Xubuntu",Edubuntu:"Edubuntu",Ubuntu:"Ubuntu"},Other:{Debian:"Debian",Fedora:"Fedora",CentOS:"CentOS|Cent OS","Linux Mint":"Linux Mint",openSUSE:"openSUSE",Linux:"Linux",Maemo:"Maemo",FreeBSD:"FreeBSD",NetBSD:"NetBSD",OpenBSD:"OpenBSD",Dragonfly:"Dragonfly",Syllable:"Syllable"},HP:{webOS:"webOS","Palm OS":"PalmOS|Palm OS"},RIM:{BlackBerry:"BlackBerry","RIM Tablet OS":"RIM Tablet OS",QNX:"QNX"},Accenture:{"Symbian OS":"SymbOS|SymbianOS|Symbian OS"},Samsung:{bada:"bada"},Nintendo:{"Nintendo Wii":"Nintendo Wii",
"Nintendo DS":"Nintendo DS","Nintendo DSi":"Nintendo DSi"},Sony:{"Playstation Portable":"Playstation Portable",Playstation:"Playstation"},Oracle:{Solaris:"SunOS|Sun OS"}};for(b in a)for(d in a[b])if(c=h.userAgent.match(RegExp(a[b][d]+"(?:(?:/| )([0-9._]*))?","i")))return a=(a=c[2]||c[1]||null)?a.replace(/_/g,"."):null,{vendor:b,name:d,version:a};return null},device:function(){var a=i.documentElement,b=i.getElementsByTagName("body")[0],d=h.userAgent.match(/(iPad|SCH-I800|xoom|kindle)/i),c=h.userAgent.match(/(iPhone|iPod|blackberry|android 0.5|htc|lg|midp|mmp|mobile|nokia|opera mini|palm|pocket|psp|sgh|smartphone|symbian|treo mini|Playstation Portable|SonyEricsson|Samsung|MobileExplorer|PalmSource|Benq|Windows Phone|Windows Mobile|IEMobile|Windows CE|Nintendo Wii)/i);
return{screen:{width:j.width,height:j.height,pixelRatio:e.devicePixelRatio||null},viewport:{width:j.availWidth||e.innerWidth||a.clientWidth||b.clientWidth,height:j.availHeight||e.innerHeight||a.clientHeight||b.clientHeight,colorDepth:j.colorDepth||j.pixelDepth||null},isTablet:!!d,isPhone:!this.isTablet&&!!c,isMobile:!!d||!!c}}},l={parseUrl:function(a){var b=i.createElement("a"),d={};b.href=a;a=b.search.substr(1);if(""!==a){var a=a.split("&"),c,f;for(f in a)c=a[f].split("="),2===c.length&&(d[c[0]]=
decodeURIComponent(c[1]))}else d=null;return{scheme:b.protocol.substr(0,b.protocol.length-1),host:b.host,port:""===b.port?80:b.port,path:b.pathname,query:d,fragment:b.hash||null}},setCookie:function(a,b,d,c,f,e){if(!i.cookie||!a)return!1;b||(d=-1);d&&(d=k+d);return i.cookie=[encodeURIComponent(a),"=",encodeURIComponent(""+b),d?"; expires="+(new Date(d)).toGMTString():"",c?"; path="+c:"",f?"; domain="+f:"",e?"; secure":""].join("")},getCookie:function(a,b){if(!i.cookie)return!1;b=RegExp("(?:^|; )"+
encodeURIComponent(a)+"=([^;]*)");return(b=b.exec(i.cookie))?decodeURIComponent(b[1]):null},storeData:function(a,b,d){m?m[a]=b?this.pack(b,d):void 0:this.setCookie(a,this.pack(b),d)},retrieveData:function(a){return m&&m[a]?this.unpack(m[a]):this.unpack(this.getCookie(a))},pack:function(a,b){a.VERSION=0.1;if(b)a.EXPIRES=k+b;var d=o.stringify(a);delete a.VERSION;delete a.EXPIRES;return d},unpack:function(a){return(a=o.parse(a))&&0.1===a.VERSION&&a.EXPIRES>k?(delete a.VERSION,delete a.EXPIRES,a):null},
loadScript:function(a,b){b=i.createElement("script");b.type="text/javascript";b.src=a;i.getElementsByTagName("head")[0].appendChild(b)}},o={parse:e.JSON&&e.JSON.parse||function(){return"string"!==typeof data||!data?null:(new Function("return "+data))()},stringify:e.JSON&&e.JSON.stringify||function(a){var b=typeof a;if("object"!==b||null===a){if("string"===b)return'"'+a+'"'}else{var d,c,f=[],e=a.constructor===Array;for(d in a)c=a[d],b=typeof c,"string"===b?c='"'+c+'"':"object"===b&&null!==c&&(c=this.stringify(c)),
f.push((e?"":'"'+d+'":')+c);return(e?"[":"{")+f.join()+(e?"]":"}")}}};return function(){var a,b,d=this,c=0,f=function(){0===c&&"function"===typeof g.arrived&&g.arrived(d)};if(e.visit&&"object"===typeof e.visit)for(a in e.visit)g[a]=e.visit[a];for(a in n)if(b=d[a]=n[a](),"function"===typeof b)try{b(function(a,b){d[b]=a;c--;f()},a),c++}catch(h){console.log(h.message)}f()}}();e.visitor=new p})(this);
